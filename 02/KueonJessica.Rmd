---
title: "Split apply combine ..."
author: "Jessica Kueon"
topic: "02"
layout: post
root: ../../../
---



1. **Which (base R) functions do you know that support the split-apply-combine strategy? In your opinion, are these sufficient - state why or why not?**. 
"Aggregate" function in base R can conduct various manipluations of large datasets. However, I personally think that it is not easy to work with Aggregate compared to similar functions under dplyr. I get too many error messages.  

2. **Using a dataset of your choice, show (by including the split-apply-combine command(s) in your answer) how you can use the split-apply-combine strategy for a part of the data analysis.**


I used FBI dataset under classdata package. 

```{r}
library(classdata)
library(tidyverse)
head(fbi)

```

We can apply functions from plyr to examine a categorical variable, Violent.crime column. It is an indicator variable to show that if the type of crime committed is considered as violent crimes (murder and nonnegligent manslaughter, rape, robbery, and aggravated assault.)

```{r}
fbi %>% group_by(Violent.crime) %>% summarise(n = n())

```

Or, I can introduce a new column. 

```{r}

## First I make two new columns, rate and rank

fbi <- fbi %>% group_by(Type) %>% mutate(
  Rate = Count/Population*100000,
  Rank = rank(Rate) 
)

fbi2 <- fbi %>% 
  group_by(Type, Year) %>%
  filter(!is.na(Rate)) %>%
  mutate(
    Rank = rank(Rate)
  )

## Create a plot to visualize the ranking
top <- fbi2 %>% filter(Rank<=5)
top %>% 
  ggplot(aes(x = Abb)) + geom_bar(aes(fill=factor(Rank))) +
  facet_wrap(~Type, scale="free")

```
